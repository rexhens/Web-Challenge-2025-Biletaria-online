<?php

$pageStyles = [
    "../assets/css/style-starter.css",
    "../assets/css/shows.css",
    "https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css",
    "https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css"
];
require '../includes/header.php';
?>

	<section class="w3l-main-slider position-relative" id="home">
		<div class="companies20-content">
			<div class="owl-one owl-carousel owl-theme">
				<div class="item">
					<li>
						<div class="slider-info banner-view bg bg2">
							<div class="banner-info">
								<h3>Dasma Shqiptare</h3>
								<p>Ky produksion i Teatrit Metropol i titulluar “Dasmat Shqiptare” ka në qendër identifikimin dhe prezantimin e vlerave më të mira kombëtare nëpërmjet institucionit të dasmës, <span class="over-para">
									duke kombinuar me finesë dhe një qasje totalisht moderne vizuale, ritualet e dasmave shqiptare me këngë...</span></p>
								<a href="#small-dialog1" class="popup-with-zoom-anim play-view1">
									<span class="video-play-icon">
										<span class="fa fa-play"></span>
									</span>
									<h6>Shiko Trailerin</h6>
								</a>
								<div id="small-dialog1" class="zoom-anim-dialog mfp-hide">
									<iframe src="https://www.youtube.com/embed/7ff2s7XxWkA" allow="autoplay; fullscreen"
										allowfullscreen=""></iframe>
								</div>
							</div>
						</div>
					</li>
				</div>
				<div class="item">
					<li>
						<div class="slider-info  banner-view banner-top1 bg bg2">
							<div class="banner-info">
								<h3>Probleme me Pijen</h3>
								<p>Motrat e Manastirit të Qepjes së Përjetshme kanë një sekret - prodhojnë verë fshehurazi për të mbajtur manastirin hapur! <span class="over-para">
									Por kur dy gazetarë të maskuar si prift ...</span></p>
								<a href="#small-dialog2" class="popup-with-zoom-anim play-view1">
									<span class="video-play-icon">
										<span class="fa fa-play"></span>
									</span>
									<h6>Shiko Trailerin</h6>
								</a>
								<div id="small-dialog2" class="zoom-anim-dialog mfp-hide">
									<iframe src="https://www.youtube.com/embed/BwueSCsxT6M" allow="autoplay; fullscreen"
										allowfullscreen=""></iframe>
								</div>
							</div>
						</div>
					</li>
				</div>
				<div class="item">
					<li>
						<div class="slider-info banner-view banner-top2 bg bg2">
							<div class="banner-info">
								<h3>Një letër për stinet</h3>
								<p>Një letër për stinët është një shfaqje magjike për fëmijët, ku Pranvera, Vera, Vjeshta dhe Dimri nisen në një udhëtim për të kuptuar çfarë ndodh kur humbet Koha.<span class="over-para">
									Plot muzikë, kërcim, kukulla dhe interaktivitet — kjo vepër i mëson të vegjëlve rëndësinë e çdo stine dhe fuqinë e bashkëpunimit.</span></p>
								<a href="#small-dialog3" class="popup-with-zoom-anim play-view1">
									<span class="video-play-icon">
										<span class="fa fa-play"></span>
									</span>
									<h6>Shiko Trailerin</h6>
								</a>
								<div id="small-dialog3" class="zoom-anim-dialog mfp-hide">
									<iframe src="https://www.youtube.com/embed/Bp-pEsoaIZA" allow="autoplay; fullscreen"
										allowfullscreen=""></iframe>
								</div>
							</div>
						</div>
					</li>
				</div>
				<div class="item">
					<li>
						<div class="slider-info banner-view banner-top3 bg bg2">
							<div class="banner-info">
								<h3>Miushet e Shkathëta</h3>
								<p> është premiera më e re për fëmijë në Teatrin Metropol. Një vepër e autoreve Janet Stanford, Kathryn Chase Bryer, <span class="over-para">
									e cila tregon historinë e dy miusheve aventuriere, Neli dhe Emilia të cilat jetojnë në një papafingo.</span></p>
								<a href="#small-dialog4" class="popup-with-zoom-anim play-view1">
									<span class="video-play-icon">
										<span class="fa fa-play"></span>
									</span>
									<h6>Shiko Trailerin</h6>
								</a>
								<div id="small-dialog4" class="zoom-anim-dialog mfp-hide">
									<iframe src="https://www.youtube.com/embed/8zgOVbc1Yko" allow="autoplay; fullscreen"
										allowfullscreen=""></iframe>
								</div>
							</div>
						</div>
					</li>
				</div>
			</div>
		</div>
	</section>

	<section class="w3l-grids">
		<div class="grids-main py-5">
			<div class="container py-lg-3">
				<div class="headerhny-title">
					<div class="w3l-title-grids">
						<div class="headerhny-left">
							<h3 class="hny-title">Sezoni i Ri</h3>
						</div>
						<div class="headerhny-right text-lg-right">
							<h4><a class="show-title" href="shows.php">Më shumë</a></h4>
						</div>
					</div>
				</div>
				<div class="owl-three owl-carousel owl-theme shows-container" id="shows-container"></div>
			</div>

		</div>
	</section>
	<!--grids-sec2-->
	<!--mid-slider -->
	<section class="w3l-mid-slider position-relative">
		<div class="companies20-content">
			<div class="owl-mid owl-carousel owl-theme">
				<div class="item">
					<li>
						<div class="slider-info mid-view bg bg2">
							<div class="container">
								<div class="mid-info">
									<span class="sub-text">Comedy</span>
									<h3>Jumanji: The Next Level</h3>
									<p>2019 ‧ Comedy/Action ‧ 2h 3m</p>
									<a class="watch" href="movies.html"><span class="fa fa-play"
											aria-hidden="true"></span>
										Watch Trailer</a>
								</div>
							</div>
						</div>
					</li>
				</div>
				<div class="item">
					<li>
						<div class="slider-info mid-view mid-top1 bg bg2">
							<div class="container">
								<div class="mid-info">
									<span class="sub-text">Adventure</span>
									<h3>Dolittle</h3>
									<p>2020 ‧ Family/Adventure ‧ 1h 41m</p>
									<a class="watch" href="movies.html"><span class="fa fa-play"
											aria-hidden="true"></span>
										Watch Trailer</a>
								</div>
							</div>
						</div>
					</li>
				</div>
				<div class="item">
					<li>
						<div class="slider-info mid-view mid-top2 bg bg2">
							<div class="container">
								<div class="mid-info">
									<span class="sub-text">Action</span>
									<h3>Bad Boys for Life</h3>
									<p>2020 ‧ Comedy/Action ‧ 2h 4m</p>
									<a class="watch" href="movies.html"><span class="fa fa-play"
											aria-hidden="true"></span>
										Watch Trailer</a>
								</div>
							</div>
						</div>
					</li>
				</div>
			</div>
		</div>
	</section>

<?php include('../includes/footer.php'); ?>
<!-- responsive tabs -->
<script src="../assets/js/jquery-1.9.1.min.js"></script>
<script src="../assets/js/easyResponsiveTabs.js"></script>
<script type="text/javascript">
	$(document).ready(function () {
		//Horizontal Tab
		$('#parentHorizontalTab').easyResponsiveTabs({
			type: 'default', //Types: default, vertical, accordion
			width: 'auto', //auto or any width like 600px
			fit: true, // 100% fit in a container
			tabidentify: 'hor_1', // The tab groups identifier
			activate: function (event) { // Callback function if tab is switched
				var $tab = $(this);
				var $info = $('#nested-tabInfo');
				var $name = $('span', $info);
				$name.text($tab.text());
				$info.show();
			}
		});
	});
</script>
<!--/theme-change-->
<script src="../assets/js/theme-change.js"></script>
<script src="../assets/js/owl.carousel.js"></script>
<!-- script for banner slider-->

<script>
	$(document).ready(function () {
		$('.owl-one').owlCarousel({
			stagePadding: 280,
			loop: true,
			margin: 20,
			nav: true,
			responsiveClass: true,
			autoplay: true,
			autoplayTimeout: 5000,
			autoplaySpeed: 1000,
			autoplayHoverPause: false,
			responsive: {
				0: {
					items: 1,
					stagePadding: 40,
					nav: false
				},
				480: {
					items: 1,
					stagePadding: 60,
					nav: true
				},
				667: {
					items: 1,
					stagePadding: 80,
					nav: true
				},
				1000: {
					items: 1,
					nav: true
				}
			}
		})
	})
</script>
<script>
	$(document).ready(function () {
		$('.owl-mid').owlCarousel({
			loop: true,
			margin: 0,
			nav: false,
			responsiveClass: true,
			autoplay: true,
			autoplayTimeout: 5000,
			autoplaySpeed: 1000,
			autoplayHoverPause: false,
			responsive: {
				0: {
					items: 1,
					nav: false
				},
				480: {
					items: 1,
					nav: false
				},
				667: {
					items: 1,
					nav: true
				},
				1000: {
					items: 1,
					nav: true
				}
			}
		})
	})
</script>
<!-- script for owlcarousel -->
<script src="../assets/js/jquery.magnific-popup.min.js"></script>
<script>
	$(document).ready(function () {
		$('.popup-with-zoom-anim').magnificPopup({
			type: 'inline',

			fixedContentPos: false,
			fixedBgPos: true,

			overflowY: 'auto',

			closeBtnInside: true,
			preloader: false,

			midClick: true,
			removalDelay: 300,
			mainClass: 'my-mfp-zoom-in'
		});

		$('.popup-with-move-anim').magnificPopup({
			type: 'inline',

			fixedContentPos: false,
			fixedBgPos: true,

			overflowY: 'auto',

			closeBtnInside: true,
			preloader: false,

			midClick: true,
			removalDelay: 300,
			mainClass: 'my-mfp-slide-bottom'
		});
	});
</script>
<!-- disable body scroll which navbar is in active -->
<script>
	$(function () {
		$('.navbar-toggler').click(function () {
			$('body').toggleClass('noscroll');
		})
	});
</script>
<!-- disable body scroll which navbar is in active -->

<!--/MENU-JS-->
<script>
	$(window).on("scroll", function () {
		var scroll = $(window).scrollTop();

		if (scroll >= 80) {
			$("#site-header").addClass("nav-fixed");
		} else {
			$("#site-header").removeClass("nav-fixed");
		}
	});

	//Main navigation Active Class Add Remove
	$(".navbar-toggler").on("click", function () {
		$("header").toggleClass("active");
	});
	$(document).on("ready", function () {
		if ($(window).width() > 991) {
			$("header").removeClass("active");
		}
		$(window).on("resize", function () {
			if ($(window).width() > 991) {
				$("header").removeClass("active");
			}
		});
	});
</script>

<script>
    async function fetchFilteredShows() {
        const genre = "";
        const dateFilterValue = "available";

        try {
            // Fetch new shows
            const response = await fetch('filter_shows.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `show_time_filter=${encodeURIComponent(dateFilterValue)}&genre_id=${encodeURIComponent(genre)}`
            });

            const html = await response.text();
            const showsContainer = document.getElementById("shows-container");

            // Insert the new content into the container
            showsContainer.innerHTML = html;

            // Re-initialize the Owl Carousel after content is inserted
            setTimeout(() => {
                // Destroy any previous carousel instances before re-initializing
                if ($('.owl-three').hasClass('owl-loaded')) {
                    $('.owl-three').trigger('destroy.owl.carousel');
                }

                // Re-initialize the Owl Carousel with the new content
                $('.owl-three').owlCarousel({
                    stagePadding: 0,
                    loop: true,
                    margin: 20,
                    nav: true,
                    responsiveClass: true,
                    autoplay: true,
                    autoplayTimeout: 5000,
                    autoplaySpeed: 1000,
                    autoplayHoverPause: false,
                    responsive: {
                        0: {
                            items: 1,
                            nav: false,
                            stagePadding: 0,
                        },
                        390: {
                            items: 1,
                            nav: false,
                            stagePadding: 30,
                        },
                        450: {
                            items: 1,
                            nav: false,
                            stagePadding: 40,
                        },
                        490: {
                            items: 1,
                            nav: true,
                            stagePadding: 75
                        },
                        550: {
                            items: 1,
                            nav: true,
                            stagePadding: 90
                        },
                        630: {
                            items: 1,
                            nav: true,
                            stagePadding: 120
                        },
                        700: {
                            items: 2,
                            nav: true,
                            stagePadding: 0
                        },
                        800: {
                            items: 2,
                            nav: true,
                            stagePadding: 40
                        },
                        900: {
                            items: 2,
                            nav: true,
                            stagePadding: 80
                        },
                        1000: {
                            items: 3,
                            nav: true
                        }
                    }
                });
            }, 100); // Timeout for DOM update
        } catch (error) {
            document.getElementById("shows-container").innerHTML = "<div class='errors show'><p>Gabim gjatë filtrimit!</p></div>";
        }
    }

    fetchFilteredShows();
</script>

<script src="../assets/js/bootstrap.min.js"></script>